<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Nuevo Contrato</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">

<div class="max-w-2xl mx-auto bg-white rounded-2xl shadow p-6">

    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold">Nuevo Contrato</h1>

        <a href="/contratos"
           class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl">
            ← Volver
        </a>
    </div>

    <form th:action="@{/contratos}" method="post" th:object="${contrato}">

        <!-- CLIENTE -->
        <label class="block mb-1 font-semibold">Cliente</label>
        <select th:field="*{cliente.id}"
                class="border rounded-xl px-3 py-2 w-full mb-4" required>
            <option value="">Seleccionar cliente</option>
            <option th:each="c : ${clientes}"
                    th:value="${c.id}"
                    th:text="${c.nombre}">
            </option>
        </select>

        <!-- PROPIEDAD -->
        <label class="block mb-1 font-semibold">Propiedad</label>
        <input th:field="*{propiedad}"
               placeholder="Ej: Depto 2B - San Martín 123"
               class="border rounded-xl px-3 py-2 w-full mb-4"
               required/>

        <!-- MONTO -->
        <label class="block mb-1 font-semibold">Monto mensual</label>
        <input type="number" step="0.01"
               th:field="*{montoMensual}"
               placeholder="Ej: 250000"
               class="border rounded-xl px-3 py-2 w-full mb-4"
               required/>

        <!-- MESES ACTUALIZACION -->
        <label class="block mb-1 font-semibold">
            Actualiza cada (meses)
        </label>
        <input type="number"
               th:field="*{mesesActualizacion}"
               placeholder="Ej: 4 o 6"
               class="border rounded-xl px-3 py-2 w-full mb-4"
               required/>

        <!-- FECHA INICIO -->
        <label class="block mb-1 font-semibold">Fecha inicio</label>
        <input type="date"
               th:field="*{fechaInicio}"
               max="2200-12-31"
               class="border rounded-xl px-3 py-2 w-full mb-3"/>

        <!-- FECHA FIN -->
        <label class="block mb-1 font-semibold">Fecha fin</label>
        <input type="date"
               th:field="*{fechaFin}"
               max="2200-12-31"
               class="border rounded-xl px-3 py-2 w-full mb-3"/>

        <!-- BOTON -->
        <button
                class="bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-xl w-full font-semibold">
            Guardar contrato
        </button>

    </form>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const inicio = document.querySelector('[name="fechaInicio"]');
        const fin = document.querySelector('[name="fechaFin"]');

        if (inicio && fin) {
            inicio.addEventListener("change", function () {
                fin.min = inicio.value;
            });
        }
    });
</script>

</body>
</html>